# 要件定義書: bitbank BTC/JPY リアルタイム価格表示WEBアプリ

## 1. プロジェクト概要

### 目的
bitbank取引所からBTC/JPYの価格をリアルタイムで取得し、WEBブラウザ上に表示するアプリケーションを開発する。

### スコープ
- BTC/JPYペアの価格情報のリアルタイム表示
- シンプルで分かりやすいUI
- レスポンシブデザイン対応

## 2. 機能要件

### 2.1 必須機能
- **リアルタイム価格表示**
  - 現在価格（last）
  - 売値（sell）
  - 買値（buy）
  - 最終更新時刻

- **価格変動表示**
  - 前回価格からの変動率
  - 変動額
  - 価格トレンド（上昇/下降）の視覚的表示

- **接続状態表示**
  - WebSocket接続状態の表示
  - 再接続機能

### 2.2 推奨機能
- **価格履歴**
  - 簡易チャート表示（最新1時間程度）
  - 高値/安値表示

- **アラート機能**
  - 指定価格到達時の通知
  - ブラウザ通知対応

## 3. 技術要件

### 3.1 データソース
- **API**: bitbank WebSocket API
- **エンドポイント**: `wss://stream.bitbank.cc`
- **チャンネル**: `ticker_btc_jpy`
- **プロトコル**: socket.io 4.x

### 3.2 技術スタック
- **フロントエンド**: HTML5, CSS3, JavaScript (ES6+)
- **リアルタイム通信**: socket.io-client
- **UI フレームワーク**: 軽量なもの（検討中）
- **チャート**: Chart.js または軽量な代替

### 3.3 対応ブラウザ
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

## 4. 非機能要件

### 4.1 パフォーマンス
- 価格更新レスポンス: 500ms以内
- 初期ロード時間: 3秒以内
- メモリ使用量: 50MB以下

### 4.2 可用性
- WebSocket切断時の自動再接続
- エラーハンドリング
- フォールバック機能

### 4.3 セキュリティ
- HTTPS通信
- XSS対策
- CSRFトークン不要（読み取り専用）

## 5. UI/UX要件

### 5.1 画面構成
```
┌─────────────────────────────────┐
│          BTC/JPY 価格           │
├─────────────────────────────────┤
│  ¥896,489  [▲ +1.2%]           │
│  売値: ¥896,490                 │
│  買値: ¥896,489                 │
│  更新: 14:23:45                 │
├─────────────────────────────────┤
│      [簡易チャート表示]          │
├─────────────────────────────────┤
│  接続状態: ●接続中              │
└─────────────────────────────────┘
```

### 5.2 デザイン要件
- **カラーテーマ**: ダーク/ライト切り替え対応
- **フォント**: 数字は等幅フォント使用
- **レスポンシブ**: モバイル対応
- **アニメーション**: 価格変動時の滑らかな変化

## 6. データ形式

### 6.1 受信データ例
```json
{
  "sell": "896490",
  "buy": "896489", 
  "last": "896489",
  "timestamp": 1570080042822
}
```

### 6.2 内部データ処理
- 価格の数値変換とフォーマット
- タイムスタンプの日時変換
- 変動率の計算

## 7. 開発・運用要件

### 7.1 開発環境
- Node.js (推奨: LTS版)
- npm/yarn
- モダンブラウザでの開発

### 7.2 デプロイ
- 静的ファイルとしてホスティング可能
- CDN配信対応
- GitHub Pages等での公開

## 8. リスク・制約事項

### 8.1 技術的リスク
- bitbank API の利用制限
- WebSocket接続の安定性
- ブラウザ互換性

### 8.2 ビジネスリスク
- bitbank API仕様変更
- サービス停止時の対応

## 9. 成功指標

- リアルタイム価格表示の実現
- 接続安定性（99%以上）
- ユーザビリティテスト合格
- モバイル対応完了